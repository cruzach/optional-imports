{"version":3,"sources":["CardField.tsx"],"names":["React","useCallback","requireNativeComponent","CardFieldNative","CardField","onCardChange","onFocus","props","onCardChangeHandler","event","card","nativeEvent","cardNumber","number","last4","length","slice","data","cvc","expiryMonth","expiryYear","complete","brand","hasOwnProperty","postalCode","onFocusHandler","focusedField"],"mappings":";;AACA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;AACA,SAGEC,sBAHF,QAMO,cANP;AAQA,MAAMC,eAAe,GAAGD,sBAAsB,CAC5C,WAD4C,CAA9C;AAIA;AACA;AACA;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,SAAT,CAAmB;AAAEC,EAAAA,YAAF;AAAgBC,EAAAA,OAAhB;AAAyB,KAAGC;AAA5B,CAAnB,EAA+D;AACpE,QAAMC,mBAAmB,GAAGP,WAAW,CACpCQ,KAAD,IAAoD;AAClD,UAAMC,IAAI,GAAGD,KAAK,CAACE,WAAnB;AACA,UAAMC,UAAU,GAAGF,IAAI,CAACG,MAAL,IAAe,EAAlC;AACA,UAAMC,KAAK,GACTF,UAAU,CAACG,MAAX,IAAqB,CAArB,GAAyBH,UAAU,CAACI,KAAX,CAAiBJ,UAAU,CAACG,MAAX,GAAoB,CAArC,CAAzB,GAAmE,EADrE;AAGA,UAAME,IAAuB,GAAG;AAC9BH,MAAAA,KAAK,EAAEJ,IAAI,CAACI,KAAL,IAAcA,KADS;AAE9BD,MAAAA,MAAM,EAAED,UAFsB;AAG9BM,MAAAA,GAAG,EAAER,IAAI,CAACQ,GAAL,IAAY,EAHa;AAI9BC,MAAAA,WAAW,EAAET,IAAI,CAACS,WAAL,IAAoB,CAJH;AAK9BC,MAAAA,UAAU,EAAEV,IAAI,CAACU,UAAL,IAAmB,CALD;AAM9BC,MAAAA,QAAQ,EAAEX,IAAI,CAACW,QANe;AAO9BC,MAAAA,KAAK,EAAEZ,IAAI,CAACY;AAPkB,KAAhC;;AAUA,QAAIZ,IAAI,CAACa,cAAL,CAAoB,YAApB,CAAJ,EAAuC;AACrCN,MAAAA,IAAI,CAACO,UAAL,GAAkBd,IAAI,CAACc,UAAL,IAAmB,EAArC;AACD;;AACDnB,IAAAA,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAGY,IAAH,CAAZ;AACD,GArBoC,EAsBrC,CAACZ,YAAD,CAtBqC,CAAvC;AAyBA,QAAMoB,cAAc,GAAGxB,WAAW,CAE9BQ,KADF,IAIK;AACHH,IAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAGG,KAAK,CAACE,WAAN,CAAkBe,YAArB,CAAP;AACD,GAP+B,EAQhC,CAACpB,OAAD,CARgC,CAAlC;AAWA,sBACE,oBAAC,eAAD;AACE,IAAA,YAAY,EAAEE,mBADhB;AAEE,IAAA,aAAa,EAAEiB;AAFjB,KAGMlB,KAHN,EADF;AAOD","sourcesContent":["import type { CardFieldInput, Nullable } from '../types';\nimport React, { useCallback } from 'react';\nimport {\n  AccessibilityProps,\n  NativeSyntheticEvent,\n  requireNativeComponent,\n  StyleProp,\n  ViewStyle,\n} from 'react-native';\n\nconst CardFieldNative = requireNativeComponent<CardFieldInput.NativeProps>(\n  'CardField'\n);\n\n/**\n *  Card Field Component Props\n */\nexport interface Props extends AccessibilityProps {\n  style?: StyleProp<ViewStyle>;\n  postalCodeEnabled?: boolean;\n  onCardChange?(card: CardFieldInput.Details): void;\n  onFocus?(focusedField: Nullable<CardFieldInput.Names>): void;\n}\n\ntype NativeCardDetails = CardFieldInput.Details & {\n  number: string;\n  cvc: string;\n};\n\n/**\n *  Card Field Component\n *\n * @example\n * ```ts\n * <CardField\n *    postalCodeEnabled={false}\n *    onCardChange={(cardDetails) => {\n *    console.log('card details', cardDetails);\n *      setCard(cardDetails);\n *    }}\n *    style={{height: 50}}\n *  />\n * ```\n * @param __namedParameters Props\n * @returns JSX.Element\n * @category ReactComponents\n */\nexport function CardField({ onCardChange, onFocus, ...props }: Props) {\n  const onCardChangeHandler = useCallback(\n    (event: NativeSyntheticEvent<NativeCardDetails>) => {\n      const card = event.nativeEvent;\n      const cardNumber = card.number || '';\n      const last4 =\n        cardNumber.length >= 4 ? cardNumber.slice(cardNumber.length - 4) : '';\n\n      const data: NativeCardDetails = {\n        last4: card.last4 || last4,\n        number: cardNumber,\n        cvc: card.cvc || '',\n        expiryMonth: card.expiryMonth || 0,\n        expiryYear: card.expiryYear || 0,\n        complete: card.complete,\n        brand: card.brand,\n      };\n\n      if (card.hasOwnProperty('postalCode')) {\n        data.postalCode = card.postalCode || '';\n      }\n      onCardChange?.(data);\n    },\n    [onCardChange]\n  );\n\n  const onFocusHandler = useCallback(\n    (\n      event: NativeSyntheticEvent<{\n        focusedField: Nullable<CardFieldInput.Names>;\n      }>\n    ) => {\n      onFocus?.(event.nativeEvent.focusedField);\n    },\n    [onFocus]\n  );\n\n  return (\n    <CardFieldNative\n      onCardChange={onCardChangeHandler}\n      onFocusChange={onFocusHandler}\n      {...props}\n    />\n  );\n}\n"]}